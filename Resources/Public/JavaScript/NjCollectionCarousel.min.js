
function NjCollectionCarousel(a,b){console.log("NjCollectionCarousel instantiated");this.njcollection_extkey="tx_njcollection";this.controller="carousel";this.action=b;this.uid=a;this.selectors=[];this.selectors.base="."+this.njcollection_extkey+"."+this.controller+"."+this.action;this.selectors.collection=".collection";this.selectors.item=".item";this.viewport_width;this.number_of_items;this.collection;this.njCollection=new NjCollection();this.timeoutInterval;this.initialize()}NjCollectionCarousel.prototype.initialize=function(){this.viewport_width=this.njCollection.getDimensions(this.njCollection._ACTION_GET_WIDTH_VIEWPORT);this.collection=$(this.selectors.base+"[data-uid="+this.uid+"] "+this.selectors.collection);setTimeout(this.start(this.action),500);this.set(this.action)};NjCollectionCarousel.prototype.set=function(a){switch(a){case"index":this.indexSet();break;default:}};NjCollectionCarousel.prototype.indexSet=function(){this.number_of_items=this.collection.children(this.selectors.item).length;if(this.number_of_items>0){var b=100;var a=1;this.collection.children(this.selectors.item).each(function(){$(this).css({zIndex:b-a});a++});this.collection.children(this.selectors.item).not(this.collection.children(this.selectors.item).first()).each(function(){$(this).css({opacity:0})})}};NjCollectionCarousel.prototype.start=function(a){switch(a){case"index":this.indexStart();break;default:}};NjCollectionCarousel.indexFade=function(e,f,d){var f=f;var d=d;var c=100;var a=f.children(d.item+'[data-status="'+NjCollection._STATUS_ACTIVE+'"]');var b=a.next();if(a.is(":last-child")){b=f.children(d.item).first()}a.css({zIndex:c}).animate({opacity:0},1500,"easeOutBounce",function(){$(this).attr("data-status",NjCollection._STATUS_INACTIVE)});b.css({zIndex:c-1}).animate({opacity:100},750,"easeInBounce",function(){$(this).attr("data-status",NjCollection._STATUS_ACTIVE)})};NjCollectionCarousel.prototype.indexStart=function(){this.collection.children(this.selectors.item).first().attr("data-status",NjCollection._STATUS_ACTIVE);this.collection.parent().find(".overlay").animate({backgroundColor:"transparent"},1500,"easeOutBounce",function(){});var a=this;this.timeoutInterval=setInterval(function(){NjCollectionCarousel.indexFade(a.uid,a.collection,a.selectors)},5000)};